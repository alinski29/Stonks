<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic usage · Stonks.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.jpg" alt="Stonks.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Stonks.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><span class="tocitem">User guide</span><ul><li class="is-active"><a class="tocitem" href="basic_usage.html">Basic usage</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Client-setup"><span>Client setup</span></a></li><li><a class="tocitem" href="#API-Summary"><span>API Summary</span></a></li><li><a class="tocitem" href="#Get-price-time-series"><span>Get price time series</span></a></li><li><a class="tocitem" href="#Get-asset-information"><span>Get asset information</span></a></li><li><a class="tocitem" href="#Get-exchange-rates"><span>Get exchange rates</span></a></li><li><a class="tocitem" href="#DataFrames-integration"><span>DataFrames integration</span></a></li><li><a class="tocitem" href="#Persisting-data"><span>Persisting data</span></a></li></ul></li><li><a class="tocitem" href="advanced_usage.html">Advanced usage</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="api_types.html">Types</a></li><li><a class="tocitem" href="api_functions.html">Functions</a></li></ul></li><li><a class="tocitem" href="contributing.html">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User guide</a></li><li class="is-active"><a href="basic_usage.html">Basic usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="basic_usage.html">Basic usage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/alinski29/Stonks.jl/blob/master/docs/src/basic_usage.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Basic-usage"><a class="docs-heading-anchor" href="#Basic-usage">Basic usage</a><a id="Basic-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-usage" title="Permalink"></a></h1><hr/><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;Stonks&quot;)</code></pre><p>If for some reason, the package is not available within the Julia Pkg ecosystem, you can install it from Github</p><pre><code class="language-julia hljs">using Pkg
Pkg.dev(&quot;https://github.com/alinski29/Stonks.jl&quot;)</code></pre><p>Throughout the rest of the tutorial we will assume that you have installed the Stonks.jl package and have already typed <code>using Stonks</code> which loads the package.</p><hr/><h2 id="Client-setup"><a class="docs-heading-anchor" href="#Client-setup">Client setup</a><a id="Client-setup-1"></a><a class="docs-heading-anchor-permalink" href="#Client-setup" title="Permalink"></a></h2><p>For retrieving data from the web, you&#39;ll need an instance of <a href="api_types.html#Stonks.APIClients.APIClient"><code>Stonks.APIClient</code></a>, which holds all relevant information for requesting the data. There are currently two data providers supported:</p><ul><li><a href="https://www.yahoofinanceapi.com">Yahoo Finance</a></li><li><a href="https://www.alphavantage.co">Alphavantage</a></li></ul><p>For any provider, you need to sign up on the website and obtain a token.  Then, you can load a client using one of the following functions.</p><pre><code class="language-julia hljs">client = YahooClient(&quot;&lt;my_token&gt;&quot;)
# or client = AlphavantageJSONClient(&quot;&lt;my_token&gt;&quot;)</code></pre><hr/><h3 id="Client-resolution-fron-ENV-variables"><a class="docs-heading-anchor" href="#Client-resolution-fron-ENV-variables">Client resolution fron ENV variables</a><a id="Client-resolution-fron-ENV-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Client-resolution-fron-ENV-variables" title="Permalink"></a></h3><p>You can omit the <code>client</code> parameter in all functions IF you set one of the environment variables:</p><ul><li>For Alphavantage: <code>ALPHAVANTAGE_TOKEN</code> =&gt; will build an <code>APIClient</code> using <a href="api_functions.html#Stonks.APIClients.AlphavantageJSONClient"><code>AlphavantageJSONClient</code></a></li><li>For Yahoo Finance: <code>YAHOOFINANCE_TOKEN</code> =&gt; will build an <code>APIClient</code> using <a href="api_functions.html#Stonks.APIClients.YahooClient"><code>YahooClient</code></a></li></ul><p>In your terminal, type:</p><pre><code class="language-bash hljs">export ALPHAVANTAGE_TOKEN=&#39;MY_TOKEN&#39;
echo $ALPHAVANTAGE_TOKEN
MY_TOKEN</code></pre><pre><code class="language-julia hljs">julia&gt; ENV[&quot;ALPHAVANTAGE_TOKEN&quot;]
&quot;MY_TOKEN&quot;</code></pre><hr/><h2 id="API-Summary"><a class="docs-heading-anchor" href="#API-Summary">API Summary</a><a id="API-Summary-1"></a><a class="docs-heading-anchor-permalink" href="#API-Summary" title="Permalink"></a></h2><p>&lt;div align=&quot;left&quot;&gt; &lt;style type=&quot;text/css&quot;&gt; .tg  {border-collapse:collapse;border-color:#ccc;border-spacing:0;} .tg td{background-color:#fff;border-color:#ccc;border-style:solid;border-width:1px;color:#333;   font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;word-break:normal;} .tg th{background-color:#f0f0f0;border-color:#ccc;border-style:solid;border-width:1px;color:#333;   font-family:Arial, sans-serif;font-size:14px;font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;} .tg .tg-hfmg{border-color:#9b9b9b;font-family:inherit;text-align:center;vertical-align:middle} .tg .tg-rek1{background-color:#efefef;border-color:#9b9b9b;font-family:inherit;text-align:center;vertical-align:top} .tg .tg-otat{background-color:#f9f9f9;border-color:#9b9b9b;font-family:inherit;text-align:left;vertical-align:top} .tg .tg-d7ja{background-color:#f9f9f9;border-color:#9b9b9b;font-family:inherit;font-size:16px;font-weight:bold;text-align:center;   vertical-align:top} .tg .tg-9sbb{border-color:#9b9b9b;font-family:inherit;font-size:18px;font-weight:bold;text-align:center;vertical-align:middle} .tg .tg-6cmx{background-color:#f9f9f9;border-color:#9b9b9b;font-family:inherit;text-align:center;vertical-align:middle} .tg .tg-psru{border-color:#9b9b9b;font-family:inherit;text-align:left;vertical-align:top} &lt;/style&gt; &lt;table class=&quot;tg&quot; style=&quot;undefined;table-layout: fixed; width: 896px&quot;&gt; &lt;colgroup&gt; &lt;col style=&quot;width: 174px&quot;&gt; &lt;col style=&quot;width: 195px&quot;&gt; &lt;col style=&quot;width: 245px&quot;&gt; &lt;col style=&quot;width: 136px&quot;&gt; &lt;col style=&quot;width: 146px&quot;&gt; &lt;/colgroup&gt; &lt;thead&gt;   &lt;tr&gt;     &lt;th class=&quot;tg-9sbb&quot; rowspan=&quot;2&quot;&gt;Type&lt;/th&gt;     &lt;th class=&quot;tg-9sbb&quot; rowspan=&quot;2&quot;&gt;Function&lt;/th&gt;     &lt;th class=&quot;tg-9sbb&quot; rowspan=&quot;2&quot;&gt;Description&lt;/th&gt;     &lt;th class=&quot;tg-9sbb&quot; colspan=&quot;2&quot;&gt;Clients&lt;/th&gt;   &lt;/tr&gt;   &lt;tr&gt;     &lt;th class=&quot;tg-rek1&quot;&gt;Alphavantage&lt;/th&gt;     &lt;th class=&quot;tg-rek1&quot;&gt;Yahoo Finance&lt;/th&gt;   &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt;   &lt;tr&gt;     &lt;td class=&quot;tg-psru&quot;&gt;&lt;a href=&quot;https://alinski29.github.io/Stonks.jl/dev/api<em>types.html#Stonks.Models.AssetInfo&quot; target=&quot;</em>blank&quot; rel=&quot;noopener noreferrer&quot;&gt;AssetInfo&lt;/a&gt;&lt;/td&gt;     &lt;td class=&quot;tg-psru&quot;&gt;&lt;a href=&quot;https://alinski29.github.io/Stonks.jl/dev/api<em>functions.html#Stonks.get</em>info&quot; target=&quot;<em>blank&quot; rel=&quot;noopener noreferrer&quot;&gt;get</em>info&lt;/a&gt;&lt;/td&gt;     &lt;td class=&quot;tg-psru&quot;&gt;Basic stock information&lt;/td&gt;     &lt;td class=&quot;tg-hfmg&quot;&gt;&amp;#9989;&lt;/td&gt;     &lt;td class=&quot;tg-hfmg&quot;&gt;&amp;#9989;&lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;     &lt;td class=&quot;tg-otat&quot;&gt;&lt;a href=&quot;https://alinski29.github.io/Stonks.jl/dev/api<em>types.html#Stonks.Models.AssetPrice&quot; target=&quot;</em>blank&quot; rel=&quot;noopener noreferrer&quot;&gt;AssetPrice&lt;/a&gt;&lt;/td&gt;     &lt;td class=&quot;tg-otat&quot;&gt;&lt;a href=&quot;https://alinski29.github.io/Stonks.jl/dev/api<em>functions.html#Stonks.get</em>price&quot; target=&quot;<em>blank&quot; rel=&quot;noopener noreferrer&quot;&gt;get</em>price&lt;/a&gt;&lt;/td&gt;     &lt;td class=&quot;tg-otat&quot;&gt;Historical price time series&lt;br&gt;&lt;/td&gt;     &lt;td class=&quot;tg-6cmx&quot;&gt;&amp;#9989;&lt;/td&gt;     &lt;td class=&quot;tg-6cmx&quot;&gt;&amp;#9989;&lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;     &lt;td class=&quot;tg-psru&quot;&gt;&lt;a href=&quot;https://alinski29.github.io/Stonks.jl/dev/api<em>types.html#Stonks.Models.ExchangeRate&quot; target=&quot;</em>blank&quot; rel=&quot;noopener noreferrer&quot;&gt;ExchangeRate&lt;/a&gt;&lt;/td&gt;     &lt;td class=&quot;tg-psru&quot;&gt;&lt;a href=&quot;https://alinski29.github.io/Stonks.jl/dev/api<em>functions.html#Stonks.get</em>exchange<em>rate&quot; target=&quot;</em>blank&quot; rel=&quot;noopener noreferrer&quot;&gt;get<em>exchange</em>rate&lt;/a&gt;&lt;/td&gt;     &lt;td class=&quot;tg-psru&quot;&gt;Historical exchange rate time series&lt;br&gt;&lt;/td&gt;     &lt;td class=&quot;tg-hfmg&quot;&gt;&amp;#9989;&lt;/td&gt;     &lt;td class=&quot;tg-hfmg&quot;&gt;&amp;#9989;&lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;     &lt;td class=&quot;tg-otat&quot;&gt;&lt;a href=&quot;https://alinski29.github.io/Stonks.jl/dev/api<em>types.html#Stonks.Models.IncomeStatement&quot; target=&quot;</em>blank&quot; rel=&quot;noopener noreferrer&quot;&gt;IncomeStatement&lt;/a&gt;&lt;/td&gt;     &lt;td class=&quot;tg-otat&quot;&gt;&lt;a href=&quot;https://alinski29.github.io/Stonks.jl/dev/api<em>functions.html#Stonks.get</em>income<em>statement&quot; target=&quot;</em>blank&quot; rel=&quot;noopener noreferrer&quot;&gt;get<em>income</em>statement&lt;/a&gt;&lt;/td&gt;     &lt;td class=&quot;tg-otat&quot;&gt;Historical income statement&lt;br&gt;&lt;/td&gt;     &lt;td class=&quot;tg-6cmx&quot;&gt;&amp;#9989;&lt;/td&gt;     &lt;td class=&quot;tg-6cmx&quot;&gt;&amp;#9989;&lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;     &lt;td class=&quot;tg-psru&quot;&gt;&lt;a href=&quot;https://alinski29.github.io/Stonks.jl/dev/api<em>types.html#Stonks.Models.BalanceSheet&quot; target=&quot;</em>blank&quot; rel=&quot;noopener noreferrer&quot;&gt;BalanceSheet&lt;/a&gt;&lt;/td&gt;     &lt;td class=&quot;tg-psru&quot;&gt;&lt;a href=&quot;https://alinski29.github.io/Stonks.jl/dev/api<em>functions.html#Stonks.get</em>balance<em>sheet&quot; target=&quot;</em>blank&quot; rel=&quot;noopener noreferrer&quot;&gt;get<em>balance</em>sheet&lt;/a&gt;&lt;/td&gt;     &lt;td class=&quot;tg-psru&quot;&gt;Historical balance sheet data&lt;br&gt;&lt;/td&gt;     &lt;td class=&quot;tg-hfmg&quot;&gt;&amp;#9989;&lt;/td&gt;     &lt;td class=&quot;tg-hfmg&quot;&gt;&amp;#9989;&lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;     &lt;td class=&quot;tg-d7ja&quot; colspan=&quot;2&quot;&gt;Upcoming&lt;/td&gt;     &lt;td class=&quot;tg-otat&quot;&gt;&lt;/td&gt;     &lt;td class=&quot;tg-6cmx&quot;&gt;&lt;/td&gt;     &lt;td class=&quot;tg-6cmx&quot;&gt;&lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;     &lt;td class=&quot;tg-psru&quot;&gt;CashFlowStatement&lt;/td&gt;     &lt;td class=&quot;tg-psru&quot;&gt;get<em>cash</em>flows&lt;/td&gt;     &lt;td class=&quot;tg-psru&quot;&gt;&lt;/td&gt;     &lt;td class=&quot;tg-hfmg&quot;&gt;&lt;/td&gt;     &lt;td class=&quot;tg-hfmg&quot;&gt;&lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;     &lt;td class=&quot;tg-otat&quot;&gt;Earnings&lt;/td&gt;     &lt;td class=&quot;tg-otat&quot;&gt;get_earnings&lt;/td&gt;     &lt;td class=&quot;tg-otat&quot;&gt;&lt;/td&gt;     &lt;td class=&quot;tg-6cmx&quot;&gt;&lt;/td&gt;     &lt;td class=&quot;tg-6cmx&quot;&gt;&lt;/td&gt;   &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;/div&gt;</p><hr/><h2 id="Get-price-time-series"><a class="docs-heading-anchor" href="#Get-price-time-series">Get price time series</a><a id="Get-price-time-series-1"></a><a class="docs-heading-anchor-permalink" href="#Get-price-time-series" title="Permalink"></a></h2><pre><code class="language-julia hljs">using Dates

# Create a  client
client = YahooClient(&quot;&lt;api_key&gt;&quot;) # or AlphavantageJSONClient(&lt;api_key&gt;)
julia&gt; ref_date = Date(&quot;2022-02-18&quot;) # just for reproducible results, you can omit it
2022-02-18

# &#39;to&#39; can be ommited, defaults to current day.
julia&gt; get_price(&quot;AAPL&quot;, client; from=ref_date-Day(1), to=ref_date)
2-element Vector{AssetPrice}:
 AssetPrice(&quot;AAPL&quot;, Date(&quot;2022-02-18&quot;), 167.3, 169.82, 170.5413, 166.19, missing, 82772674)
 AssetPrice(&quot;AAPL&quot;, Date(&quot;2022-02-17&quot;), 168.88, 171.03, 171.91, 168.47, missing, 69589344)
 # you can omit the client if you have the correct environment variables set
julia&gt; length(ENV[&quot;ALPHAVANTAGE_TOKEN&quot;]) # ENV[&quot;YAHOOFINANCE_TOKEN&quot;] works as well
16
julia&gt; prices = get_price([&quot;AAPL&quot;, &quot;MSFT&quot;]; from=ref_date-Day(2), to=ref_date) 
6-element Vector{AssetPrice}:
 AssetPrice(&quot;AAPL&quot;, Date(&quot;2022-02-18&quot;), 167.3, 169.82, 170.5413, 166.19, missing, 82772674)
 AssetPrice(&quot;AAPL&quot;, Date(&quot;2022-02-17&quot;), 168.88, 171.03, 171.91, 168.47, missing, 69589344)
 AssetPrice(&quot;AAPL&quot;, Date(&quot;2022-02-16&quot;), 172.55, 171.85, 173.34, 170.05, missing, 61177398)
 AssetPrice(&quot;MSFT&quot;, Date(&quot;2022-02-18&quot;), 287.93, 293.05, 293.86, 286.305, missing, 34264008)
 AssetPrice(&quot;MSFT&quot;, Date(&quot;2022-02-17&quot;), 290.73, 296.36, 296.8, 290.0, missing, 32461580)
 AssetPrice(&quot;MSFT&quot;, Date(&quot;2022-02-16&quot;), 299.5, 298.365, 300.87, 293.68, missing, 29982121)
# you can query each symbol with different time intervals
julia&gt; prices = get_price([
  (&quot;AAPL&quot;, Date(&quot;2022-02-15&quot;), Date(&quot;2022-02-16&quot;)),
  (&quot;MSFT&quot;, Date(&quot;2022-02-14&quot;), Date(&quot;2022-02-15&quot;)),
])
4-element Vector{AssetPrice}:
 AssetPrice(&quot;MSFT&quot;, Date(&quot;2022-02-15&quot;), 300.47, 300.008, 300.8, 297.02, missing, 27379488)
 AssetPrice(&quot;MSFT&quot;, Date(&quot;2022-02-14&quot;), 295.0, 293.77, 296.76, 291.35, missing, 36359487)
 AssetPrice(&quot;AAPL&quot;, Date(&quot;2022-02-16&quot;), 172.55, 171.85, 173.34, 170.05, missing, 61177398)
 AssetPrice(&quot;AAPL&quot;, Date(&quot;2022-02-15&quot;), 172.79, 170.97, 172.95, 170.25, missing, 64286320)</code></pre><hr/><h2 id="Get-asset-information"><a class="docs-heading-anchor" href="#Get-asset-information">Get asset information</a><a id="Get-asset-information-1"></a><a class="docs-heading-anchor-permalink" href="#Get-asset-information" title="Permalink"></a></h2><pre><code class="language-julia hljs">julia&gt; get_info(&quot;AAPL&quot;)
1-element Vector{AssetInfo}:
 AssetInfo(&quot;AAPL&quot;, &quot;USD&quot;, &quot;Apple Inc&quot;, &quot;Common Stock&quot;, &quot;NASDAQ&quot;, &quot;USA&quot;, &quot;Electronic Computers&quot;, &quot;Technology&quot;, missing, missing)

julia&gt; get_info([&quot;AAPL&quot;, &quot;MSFT&quot;])
2-element Vector{AssetInfo}:
 AssetInfo(&quot;MSFT&quot;, &quot;USD&quot;, &quot;Microsoft Corporation&quot;, &quot;Common Stock&quot;, &quot;NASDAQ&quot;, &quot;USA&quot;, &quot;Services-Prepackaged Software&quot;, &quot;Technology&quot;, missing, missing)
 AssetInfo(&quot;AAPL&quot;, &quot;USD&quot;, &quot;Apple Inc&quot;, &quot;Common Stock&quot;, &quot;NASDAQ&quot;, &quot;USA&quot;, &quot;Electronic Computers&quot;, &quot;Technology&quot;, missing, missing)</code></pre><hr/><h2 id="Get-exchange-rates"><a class="docs-heading-anchor" href="#Get-exchange-rates">Get exchange rates</a><a id="Get-exchange-rates-1"></a><a class="docs-heading-anchor-permalink" href="#Get-exchange-rates" title="Permalink"></a></h2><pre><code class="language-julia hljs"># Same API as get_price. the symbol needs to be a currency pair like $base/$quote,
# each consisting of exactly 3 characters.
julia&gt; ref_date = Date(&quot;2022-02-18&quot;)
julia&gt; get_exchange_rate(&quot;EUR/USD&quot;, from=ref_date-Day(1), to=ref_date)
3-element Vector{ExchangeRate}:
 ExchangeRate(&quot;EUR&quot;, &quot;USD&quot;, Date(&quot;2022-02-18&quot;), 1.13203)
 ExchangeRate(&quot;EUR&quot;, &quot;USD&quot;, Date(&quot;2022-02-17&quot;), 1.13592)
julia&gt; get_exchange_rate([&quot;EUR/USD&quot;, &quot;USD/CAD&quot;], from=ref_date-Day(1), to=ref_date)
# 4-element Vector{ExchangeRate}:
 ExchangeRate(&quot;EUR&quot;, &quot;USD&quot;, Date(&quot;2022-02-18&quot;), 1.13203)
 ExchangeRate(&quot;EUR&quot;, &quot;USD&quot;, Date(&quot;2022-02-17&quot;), 1.13592)
 ExchangeRate(&quot;USD&quot;, &quot;CAD&quot;, Date(&quot;2022-02-18&quot;), 1.2748)
 ExchangeRate(&quot;USD&quot;, &quot;CAD&quot;, Date(&quot;2022-02-17&quot;), 1.2707)
# Also works with []Tuple{String, Date} or []Tuple{String, Date, Date}
julia&gt;get_exchange_rate([
  (&quot;EUR/USD&quot;, Date(&quot;2022-02-15&quot;), Date(&quot;2022-02-16&quot;)),
  (&quot;USD/CAD&quot;, Date(&quot;2022-02-14&quot;), Date(&quot;2022-02-15&quot;)),
])
4-element Vector{ExchangeRate}:
...</code></pre><hr/><h2 id="DataFrames-integration"><a class="docs-heading-anchor" href="#DataFrames-integration">DataFrames integration</a><a id="DataFrames-integration-1"></a><a class="docs-heading-anchor-permalink" href="#DataFrames-integration" title="Permalink"></a></h2><p>The types of the <code>DataFrame</code> will match the types of any type model, <code>T&lt;:AbstractStonksRecord</code>. Currently only tested with flat data types.</p><pre><code class="language-julia hljs">julia&gt; data
4-element Vector{AssetPrice}:
 AssetPrice(&quot;MSFT&quot;, Date(&quot;2022-02-23&quot;), 280.27, 290.18, 291.7, 280.1, missing, 37811167)
 AssetPrice(&quot;AAPL&quot;, Date(&quot;2022-02-23&quot;), 160.07, 165.54, 166.15, 159.75, missing, 90009247)
julia&gt; data |&gt; to_dataframe
4x8 DataFrame
 Row │ symbol  date        close    open      high      low       close_adjusted  volume   
     │ String  Date        Float64  Float64?  Float64?  Float64?  Float64?        Int64?   
─────┼─────────────────────────────────────────────────────────────────────────────────────
   1 │ MSFT    2022-02-23   280.27    290.18    291.7     280.1          missing  37811167
   3 │ AAPL    2022-02-23   160.07    165.54    166.15    159.75         missing  90009247</code></pre><hr/><h2 id="Persisting-data"><a class="docs-heading-anchor" href="#Persisting-data">Persisting data</a><a id="Persisting-data-1"></a><a class="docs-heading-anchor-permalink" href="#Persisting-data" title="Permalink"></a></h2><p>Using a <a href="api_types.html#Stonks.Stores.FileStore"><code>FileStore</code></a>, you can easily persist and incrementaly update data having at least one identifier and one time dimension. Default file format is CSV, but you can plug in any format you wish. See <a href="advanced_usage.html#create-api-resources-for-your-custom-models">example for custom file formats</a>.</p><pre><code class="language-julia hljs">using Chain, Dates, DataFrames
using Stonks

dest = joinpath(@__DIR__, &quot;data/prices&quot;)
ds = FileStore{AssetPrice}(; path=dest, ids=[:symbol], partitions=[:symbol], time_column=&quot;date&quot;)
d_end = Date(&quot;2022-03-06&quot;)
2022-03-06

symbols = [&quot;AAPL&quot;, &quot;MSFT&quot;]
data = get_price(symbols; from=d_end-Day(7), to=d_end-Day(5))

save(ds, data)
println(readdir(dest))
[&quot;symbol=AAPL&quot;, &quot;symbol=MSFT&quot;] #data stored in partitions
df = load(ds)
show(df[1:2, :]) # types are persisted
2×8 DataFrame
 Row │ symbol  date        close    open      high      low       close_adjusted  volume   
     │ String  Date        Float64  Float64?  Float64?  Float64?  Float64?        Integer? 
─────┼─────────────────────────────────────────────────────────────────────────────────────
   1 │ AAPL    2022-03-01   163.2    164.695    166.6     161.97         missing  83474425
   2 │ AAPL    2022-02-28   165.12   163.06     165.42    162.43         missing  95056629

show_stats(ds) = @chain load(ds) begin  
  groupby(_, :symbol) 
  combine(_, :date =&gt; maximum, :date =&gt; minimum, :symbol =&gt; length =&gt; :nrows)
 show
end

show_stats(ds)
2×4 DataFrame
 Row │ symbol  date_maximum  date_minimum  nrows 
     │ String  Date          Date          Int64 
─────┼───────────────────────────────────────────
   1 │ AAPL    2022-03-01    2022-02-28        2
   2 │ MSFT    2022-03-01    2022-02-28        2

# to is optional, defaults to latest workday. here, we need it for reproductible results.
update(ds; to=d_end)
show_stats(ds) 
# d_end (2022-03-06) is a Sunday, so the latest available data is from a Friday (2022-03-04).
2×4 DataFrame
 Row │ symbol  date_maximum  date_minimum  nrows 
     │ String  Date          Date          Int64 
─────┼───────────────────────────────────────────
   1 │ AAPL    2022-03-04    2022-02-28        6
   2 │ MSFT    2022-03-04    2022-02-28        6

d_start = d_end - Day(7)
# we add 2 new stocks to our store.
update(ds, [(&quot;IBM&quot;, d_start, d_end), (&quot;AMD&quot;, d_start, d_end)], to=d_end)
show_stats(ds)
4×4 DataFrame
 Row │ symbol  date_maximum  date_minimum  nrows 
     │ String  Date          Date          Int64 
─────┼───────────────────────────────────────────
   1 │ AAPL    2022-03-04    2022-02-28        5
   2 │ AMD     2022-03-04    2022-02-28        5
   3 │ IBM     2022-03-04    2022-02-28        5
   4 │ MSFT    2022-03-04    2022-02-28        5
# update(ds, [&quot;IBM&quot;, &quot;AMD&quot;]) - will include data since earliest available
# update(ds, vcat(symbols, [&quot;IBM&quot;, &quot;AMD&quot;])) - will also update the existing symbols, 
#  if there is new data</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="index.html">« Home</a><a class="docs-footer-nextpage" href="advanced_usage.html">Advanced usage »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.14 on <span class="colophon-date" title="Monday 14 March 2022 17:51">Monday 14 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
